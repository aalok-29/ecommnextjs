{"ast":null,"code":"import initDB from '../../helpers/initDB';\nimport User from '../../models/User';\nimport bcrypt from 'bcryptjs';\nimport Cart from '../../models/Cart';\ninitDB();\nexport default (async (req, res) => {\n  const {\n    name,\n    email,\n    password\n  } = req.body;\n\n  try {\n    if (!name || !email || !password) {\n      return res.status(422).json({\n        error: \"please ass all the fields\"\n      });\n    }\n\n    const user = await User.findOne({\n      email\n    });\n\n    if (user) {\n      return res.status(422).json({\n        error: \"user already exists with that email\"\n      });\n    }\n\n    const hashedPassword = await bcrypt.hash(password, 12);\n    const newUser = await new User({\n      name,\n      email,\n      password: hashedPassword\n    }).save();\n    await new Cart({\n      user: newUser._id\n    }).save();\n    res.status(201).json({\n      message: \"signup success\"\n    });\n  } catch (err) {\n    console.log(err);\n  }\n});","map":null,"metadata":{},"sourceType":"module"}