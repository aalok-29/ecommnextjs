{"ast":null,"code":"import initDB from '../../helpers/initDB';\nimport Product from '../../models/Product';\ninitDB();\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      await getallProducts(req, res);\n      break;\n\n    case \"POST\":\n      await saveProduct(req, res);\n      break;\n  }\n});\n\nconst getallProducts = async (req, res) => {\n  try {\n    const products = await Product.find();\n    res.status(200).json(products);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst saveProduct = async (req, res) => {\n  const {\n    name,\n    price,\n    description,\n    mediaUrl\n  } = req.body;\n\n  try {\n    if (!name || !price || !description || !mediaUrl) {\n      return res.status(422).json({\n        error: \"Please add all the fields\"\n      });\n    }\n\n    const product = await new Product({\n      name,\n      price,\n      description,\n      mediaUrl\n    }).save();\n    res.status(201).json(product);\n  } catch (err) {\n    res.status(500).json({\n      error: \"internal server error\"\n    });\n    console.log(err);\n  }\n};","map":null,"metadata":{},"sourceType":"module"}