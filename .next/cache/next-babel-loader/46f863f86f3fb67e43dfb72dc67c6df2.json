{"ast":null,"code":"import User from '../../models/User';\nimport Authenticated from '../../helpers/Authenticated';\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      await fetchUsers(req, res);\n      break;\n\n    case \"PUT\":\n      await ChangeRole(req, res);\n      break;\n  }\n});\nconst fetchUsers = Authenticated(async (req, res) => {\n  const users = await User.find({\n    _id: {\n      $ne: req.userId\n    }\n  }).select(\"-password\");\n  res.status(200).json(users);\n});\nconst ChangeRole = Authenticated(async (req, res) => {\n  const {\n    _id,\n    role\n  } = req.body;\n  const newRole = role == \"user\" ? \"admin\" : \"user\";\n  const users = await User.findOneAndUpdate({\n    _id\n  }, {\n    role: newRole\n  }, {\n    new: true\n  }).select(\"-password\");\n  res.status(200).json(users);\n});","map":null,"metadata":{},"sourceType":"module"}