{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { parseCookies } from 'nookies';\nimport baseUrl from '../helpers/baseUrl';\nimport { useEffect, useRef } from 'react';\nimport UserRoles from '../components/UserRoles';\n\nconst Account = ({\n  orders\n}) => {\n  const orderCard = useRef(null);\n  const cookie = parseCookies();\n  const user = cookie.user ? JSON.parse(cookie.user) : \"\";\n  useEffect(() => {\n    M.Collapsible.init(orderCard.current);\n  }, []);\n\n  const OrderHistory = () => {\n    return __jsx(\"ul\", {\n      className: \"collapsible\",\n      ref: orderCard\n    }, orders.map(item => {\n      return __jsx(\"li\", {\n        key: item._id\n      }, __jsx(\"div\", {\n        className: \"collapsible-header\"\n      }, __jsx(\"i\", {\n        className: \"material-icons\"\n      }, \"folder\"), item.createdAt), __jsx(\"div\", {\n        className: \"collapsible-body\"\n      }, __jsx(\"h5\", null, \"Total  \\u20B9 \", item.total), item.products.map(pitem => {\n        return __jsx(\"h6\", {\n          key: pitem._id\n        }, pitem.product.name, \" X \", pitem.quantity);\n      })));\n    }));\n  };\n\n  return __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"center-align white-text\",\n    style: {\n      marginTop: \"10px\",\n      backgroundColor: \"#1565c0\",\n      padding: \"3px\"\n    }\n  }, __jsx(\"h4\", null, user.name), __jsx(\"h4\", null, user.email)), __jsx(\"h3\", null, \"Order History\"), orders.length == 0 ? __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"h5\", null, \"Your have no order History\")) : __jsx(OrderHistory, null), user.role == \"root\" && __jsx(UserRoles, null));\n};\n\nexport async function getServerSideProps(ctx) {\n  const {\n    token\n  } = parseCookies(ctx);\n\n  if (!token) {\n    const {\n      res\n    } = ctx;\n    res.writeHead(302, {\n      Location: \"/login\"\n    });\n    res.end();\n  }\n\n  const res = await fetch(`${baseUrl}/api/orders`, {\n    headers: {\n      \"Authorization\": token\n    }\n  });\n  const res2 = await res.json();\n  console.log(res2);\n  return {\n    props: {\n      orders: res2\n    }\n  };\n}\nexport default Account;","map":null,"metadata":{},"sourceType":"module"}